# Fix My Car - Vertex AI Search

–£ —Ü—å–æ–º—É –ø–æ—Å—ñ–±–Ω–∏–∫—É –æ–ø–∏—Å–∞–Ω–æ, —è–∫ —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫ **Fix My Car** –≤ **GKE**, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ **Vertex AI Search** —è–∫ —Å—Ö–æ–≤–∏—â–µ –¥–∞–Ω–∏—Ö.

<img width="2098" alt="arch-vertex-ai-search" src="https://github.com/RebelsBoss/Fix_my_car/assets/126337643/ba691211-6e73-42cb-90c9-99dd9f5a5a36">

## –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

–©–æ–± —Ä–æ–∑–≥–æ—Ä–Ω—É—Ç–∏ —Ü–µ–π –¥–æ–¥–∞—Ç–æ–∫, –≤–∞–º –∑–Ω–∞–¥–æ–±–∏—Ç—å—Å—è:

- –ü—Ä–æ–µ–∫—Ç [Google Cloud](https://cloud.google.com/resource-manager/docs/creating-managing-projects#creating_a_project) –∑ —É–≤—ñ–º–∫–Ω–µ–Ω–∏–º –±—ñ–ª—ñ–Ω–≥–æ–º.
- [Google Cloud SDK (gcloud)](https://cloud.google.com/sdk/docs/install), –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π —ñ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π —É –≤–∞—à–æ–º—É –ª–æ–∫–∞–ª—å–Ω–æ–º—É —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ (–∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ [Google Cloud Shell](https://cloud.google.com/sdk/docs/interactive-gcloud)).
- [Docker Engine](https://docs.docker.com/engine/install/), –ê–ë–û —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∑ –≤—ñ–¥–∫—Ä–∏—Ç–∏–º –≤–∏—Ö—ñ–¥–Ω–∏–º –∫–æ–¥–æ–º, —Ç–∞–∫–∏–π —è–∫ [Colima](https://github.com/abiosoft/colima), —è–∫–∏–π –º–æ–∂–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ **docker build** —Ç–∞ **docker push**.
- Java 18+, Maven 3.9.6+
- Python 3.9+

## –°—Ç–≤–æ—Ä—ñ—Ç—å Artifact Registry repository

–¢—É—Ç –≤–∏ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏–º–µ—Ç–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –¥–ª—è —Ñ—Ä–æ–Ω—Ç—É **Streamlit** —Ç–∞ –±–µ–∫–µ–Ω–¥—É **Java**. [–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏](https://cloud.google.com/learn/what-are-containers) - —Ü–µ –∑—ñ–±—Ä–∞–Ω–∏–π –≤–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ —ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ, —è–∫—ñ –º–æ–∂–Ω–∞ —Ä–æ–∑–≥–æ—Ä—Ç–∞—Ç–∏ –≤ —Ä—ñ–∑–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞—Ö.

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å **Google Cloud**. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –ø–æ—à—É–∫–æ–≤–∏–π —Ä—è–¥–æ–∫ —ñ –≤–≤–µ–¥—ñ—Ç—å **"Artifact Registry"**. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∫–æ–Ω—Å–æ–ª—ñ **Artifact Registry**.
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Create Repository**.
3. –ù–∞–∑–≤—ñ—Ç—å –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π **fixmycar**. –ó–∞–ª–∏—à—Ç–µ **Docker** –ø–æ –¥–µ—Ñ–æ–ª—Ç—É. –í–∏–±–µ—Ä—ñ—Ç—å –±—É–¥—å-—è–∫–∏–π —Ä–µ–≥—ñ–æ–Ω, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥ **us-central1**. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É **Create**.

## Build —Ç–∞ push –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤.

1. –£ –∫–æ–Ω—Å–æ–ª—ñ **Artifact Registry** –≤–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π, **fixmycar**. –ü–æ—Ç—ñ–º –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **Setup Instructions**.
2. –°–∫–æ–ø—ñ—é–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥

```
gcloud auth configure-docker us-central1-docker.pkg.dev
```

3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ç–µ—Ä–º—ñ–Ω–∞–ª –∞–±–æ **Cloud Shell**. –í—Å—Ç–∞–≤—Ç–µ –∫–æ–º–∞–Ω–¥—É —ñ –∑–∞–ø—É—Å—Ç—ñ—Ç—å —ó—ó. –¶–µ –¥–æ–∑–≤–æ–ª–∏—Ç—å –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –≤–∞—à **Docker**-–∫–ª—ñ—î–Ω—Ç —É –≤–∞—à–æ–º—É **Artifact Registry**.

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

```
{
  "credHelpers": {
    "us-central1-docker.pkg.dev": "gcloud"
  }
}
Adding credentials for: us-central1-docker.pkg.dev
```

4. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Å–∫—Ä–∏–ø—Ç **dockerpush.sh** —É –∫–æ—Ä–µ–Ω—ñ —Ü—å–æ–≥–æ –∫–∞—Ç–∞–ª–æ–≥—É. –ó–∞–º—ñ–Ω—ñ—Ç—å **PROJECT_ID** –Ω–∞ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –≤–∞—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É –≤ **Google Cloud**.
5. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ —ñ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ **Frontend** —ñ **Backend** –¥–æ **Artifact Registry**.

```
./dockerpush.sh
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

```
latest: digest: sha256:864589160d7c3f982472427ed008cc03cf244f5db61a0c7312caaaa670ee0e47 size: 1786
‚úÖ Container build and push complete.
```

## –°—Ç–≤–æ—Ä—ñ—Ç—å GKE Autopilot cluster

–í–∏ —Ä–æ–∑–≥–æ—Ä–Ω–µ—Ç–µ —Ü—ñ –¥–≤–∞ –æ–±—Ä–∞–∑–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ (**"frontend"** —ñ **"backend"**) –Ω–∞ [Google Kubernetes Engine (GKE)](https://cloud.google.com/kubernetes-engine/docs/concepts/kubernetes-engine-overview#how_works). **GKE** –ø–æ–¥–±–∞—î –ø—Ä–æ –∑–∞–ø—É—Å–∫ —Ü–∏—Ö –¥–≤–æ—Ö —Å–µ—Ä–≤–µ—Ä—ñ–≤ –Ω–∞ –±–∞–∑–æ–≤–∏—Ö –æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω–∏—Ö —Ä–µ—Å—É—Ä—Å–∞—Ö.

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å **Google Cloud**. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –ø–æ—à—É–∫–æ–≤–∏–π —Ä—è–¥–æ–∫ —ñ –≤–≤–µ–¥—ñ—Ç—å **"Kubernetes Engine"**. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∫–æ–Ω—Å–æ–ª—ñ **Kubernetes Engine**. (–Ø–∫—â–æ –≤–∞–º –±—É–¥–µ –∑–∞–ø—Ä–æ–ø–æ–Ω–æ–≤–∞–Ω–æ —É–≤—ñ–º–∫–Ω—É—Ç–∏ **API**, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Enable"**).
2. –£ –∫–æ–Ω—Å–æ–ª—ñ **Kubernetes Engine** –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **Create**, —â–æ–± –≤—ñ–¥–∫—Ä–∏—Ç–∏ –º–∞–π—Å—Ç–µ—Ä —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª–∞—Å—Ç–µ—Ä–∞.
3. –ó–±–µ—Ä–µ–∂—ñ—Ç—å –≤—Å—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º **(GKE Autopilot)**. –î–∞–π—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä—É –±—É–¥—å-—è–∫—É –Ω–∞–∑–≤—É, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, **fixmycar**. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É **Create**.

**–¶–µ –∑–∞–π–º–µ –∫—ñ–ª—å–∫–∞ —Ö–≤–∏–ª–∏–Ω.**

4. –ö–æ–ª–∏ –∫–ª–∞—Å—Ç–µ—Ä –±—É–¥–µ –≥–æ—Ç–æ–≤–∏–π, –∫–ª–∞—Ü–Ω—ñ—Ç—å –Ω–∞ –Ω–∞–∑–≤—ñ –∫–ª–∞—Å—Ç–µ—Ä–∞ —ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **Connect**. –°–∫–æ–ø—ñ—é–π—Ç–µ –∫–æ–º–∞–Ω–¥—É **"Command line Access"**, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥

```
gcloud container clusters get-credentials fixmycar --region us-central1 --project my-project
```

5. –ü–æ–≤–µ—Ä–Ω—ñ—Ç—å—Å—è –¥–æ —Å–≤–æ–≥–æ —Ç–µ—Ä–º—ñ–Ω–∞–ª—É —ñ –≤—Å—Ç–∞–≤—Ç–µ —Ü—é –∫–æ–º–∞–Ω–¥—É, –∞ –ø–æ—Ç—ñ–º –∑–∞–ø—É—Å—Ç—ñ—Ç—å —ó—ó.

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

```
Fetching cluster endpoint and auth data.
kubeconfig entry generated for fixmycar.
```

6. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –º–æ–∂–µ—Ç–µ –≤–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –≤–∞—à –∫–ª–∞—Å—Ç–µ—Ä **GKE**:

```
kubectl cluster-info
```

–í–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ–±–∞—á–∏—Ç–∏ —â–æ—Å—å –Ω–∞ –∫—à—Ç–∞–ª—Ç:

```
Kubernetes control plane is running at https://34.69.121.152
...
```

## –ó–∞–≤–∞–Ω—Ç–∞–∂—É–π—Ç–µ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–æ Cloud Storage

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Cloud Console** —ñ –∑–Ω–∞–π–¥—ñ—Ç—å **"Cloud Storage"**. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∫–æ–Ω—Å–æ–ª—ñ.
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É **"Create Bucket"**.
3. –ù–∞–∑–≤—ñ—Ç—å —Å–≤—ñ–π –±–∞–∫–µ—Ç —á–∏–º–æ—Å—å –≥–ª–æ–±–∞–ª—å–Ω–æ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, **<your-project-id>-fixmycar**. –ó–∞–ª–∏—à—Ç–µ –≤—Å—ñ —ñ–Ω—à—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —ñ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É **Create**. (–ú–æ–∂–ª–∏–≤–æ, –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –≤–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –∑–∞–±–æ—Ä–æ–Ω–∏ –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É - —Ü–µ –æ—á—ñ–∫—É–≤–∞–Ω–æ. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Confirm"**).
4. –°–∫–æ–ø—ñ—é–π—Ç–µ –ø–æ–≤–Ω—É –Ω–∞–∑–≤—É –≤–∞—à–æ–≥–æ –±–∞–∫–µ—Ç—É, –Ω–∞—Ç–∏—Å–Ω—É–≤—à–∏ –Ω–∞ —ñ–∫–æ–Ω–∫—É **"copy"**.

<img width="868" alt="bucket-uri-copy" src="https://github.com/RebelsBoss/Fix_my_car/assets/126337643/e38d3bcc-9fe8-4a0d-b474-1743ce323b0d">

5. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ç–µ—Ä–º—ñ–Ω–∞–ª. –ó–∞–¥–∞–π—Ç–µ —ñ–º'—è –≤–∞—à–æ–≥–æ –±–∞–∫–µ—Ç—É —è–∫ –∑–º—ñ–Ω–Ω—É –æ—Ç–æ—á–µ–Ω–Ω—è.

```
export BUCKET_NAME=<your-bucket-name>
```

6. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é **Cymbal Starlight 2024** –∑ –ø—É–±–ª—ñ—á–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞.

```
gsutil cp gs://github-repo/generative-ai/sample-apps/fixmycar/cymbal-starlight-2024.pdf .
```

7. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –ø–æ—Å—ñ–±–Ω–∏–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ **Cymbal Starlight 2024** –¥–æ —Å–≤–æ–≥–æ –æ—Å–æ–±–∏—Å—Ç–æ–≥–æ —Ö–º–∞—Ä–Ω–æ–≥–æ —Å—Ö–æ–≤–∏—â–∞.

```
gsutil -m cp -r cymbal-starlight-2024.pdf gs://$BUCKET_NAME
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

```
- [10/10 files][156.6 MiB/156.6 MiB] 100% Done
Operation completed over 10 objects/156.6 MiB.
```

## –ù–∞–ª–∞—à—Ç—É–π—Ç–µ Vertex AI Search

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Cloud Console** —ñ –∑–Ω–∞–π–¥—ñ—Ç—å **"Search and Conversation"**. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∫–æ–Ω—Å–æ–ª—ñ. –Ø–∫—â–æ –∑'—è–≤–∏—Ç—å—Å—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π –∑–∞–ø–∏—Ç, –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Activate API"**.
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Create a new app**, –∞ –ø–æ—Ç—ñ–º –≤–∏–±–µ—Ä—ñ—Ç—å **Search**.
3. –ó–±–µ—Ä–µ–∂—ñ—Ç—å **"Enterprise edition features"** —Ç–∞ **"Advanced LLM features"**.
4. –ù–∞–∑–≤—ñ—Ç—å –≤–∞—à –¥–æ–¥–∞—Ç–æ–∫ **[PROJECT_ID]-fixmycar** —ñ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å **"Company Name"** –Ω–∞ **fixmycar**. –ó–∞–ª–∏—à—Ç–µ —Ä–µ–≥—ñ–æ–Ω **global**.
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É **Continue**. –ü–æ—Ç—ñ–º –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **Create a new data store**.
6. –£ —Ä–æ–∑–¥—ñ–ª—ñ **"Select Data Source"** –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Cloud Storage"**. –ü–æ—Ç—ñ–º –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ **manuals/** –∫–∞—Ç–∞–ª–æ–≥—É –≤–∞—à–æ–≥–æ –±–∞–∫–µ—Ç—É —É **Cloud Storage**. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É **Continue**.
7. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å —Ä–µ–≥—ñ–æ–Ω **global**, –∞ —Ç–∏–ø **Default Document Parser** - [**OCR Parser**](https://cloud.google.com/generative-ai-app-builder/docs/parse-chunk-documents#parser-types). –ù–∞–∑–≤—ñ—Ç—å –≤–∞—à–µ —Å—Ö–æ–≤–∏—â–µ –¥–∞–Ω–∏—Ö **fixmycar**.

<img width="1805" alt="datastore-creation2" src="https://github.com/RebelsBoss/Fix_my_car/assets/126337643/b36fe869-5f02-4c05-8d50-a9a50ee04ec3">

8. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **Create**, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Å—Ö–æ–≤–∏—â–µ –¥–∞–Ω–∏—Ö.
9. –ü–æ–≤–µ—Ä–Ω—É–≤—à–∏—Å—å –¥–æ –º–∞–π—Å—Ç—Ä–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏, –≤–∏–±–µ—Ä—ñ—Ç—å —Å—Ö–æ–≤–∏—â–µ –¥–∞–Ω–∏—Ö, —è–∫–µ –≤–∏ —â–æ–π–Ω–æ —Å—Ç–≤–æ—Ä–∏–ª–∏, –∞ –ø–æ—Ç—ñ–º –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å **Create**, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≤–∞—à—É –ø—Ä–æ–≥—Ä–∞–º—É.

## –¢–µ—Å—Ç—É—î–º–æ Vertex AI Search —Å—Ö–æ–≤–∏—â–µ –¥–∞–Ω–∏—Ö

1. –ü–æ–≤–µ—Ä–Ω—É–≤—à–∏—Å—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É **Data Stores**, –≤–∏–±–µ—Ä—ñ—Ç—å –Ω–æ–≤–µ —Å—Ö–æ–≤–∏—â–µ –¥–∞–Ω–∏—Ö. –ü–æ—Ç—ñ–º –ø–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Activity**. –¢—É—Ç –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å—Ç–∞–Ω –æ–±—Ä–æ–±–∫–∏ **PDF**-—Ñ–∞–π–ª—ñ–≤. –í –æ—Å–Ω–æ–≤—ñ **Vertex AI Search** –ª–µ–∂–∏—Ç—å —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ —ñ –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è —ó—Ö —É –≤–µ–∫—Ç–æ—Ä–Ω—ñ –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è. –ü–æ—Ç—ñ–º –≤—ñ–Ω –∑–±–µ—Ä—ñ–≥–∞—î —Ü—ñ –≤–±—É–¥–æ–≤—É–≤–∞–Ω–Ω—è –≤ —Å—Ö–æ–≤–∏—â—ñ –¥–∞–Ω–∏—Ö. **–¶–µ –º–æ–∂–µ –∑–∞–π–Ω—è—Ç–∏ –±–ª–∏–∑—å–∫–æ 10 —Ö–≤–∏–ª–∏–Ω.**

<img width="1813" alt="datastore-activity" src="https://github.com/RebelsBoss/Fix_my_car/assets/126337643/bed6298e-b2d0-4ae9-88c1-2afbc806ffb4">

2. –ö–æ–ª–∏ –≤–∞—à–µ —Å—Ö–æ–≤–∏—â–µ –¥–∞–Ω–∏—Ö –±—É–¥–µ –≥–æ—Ç–æ–≤–µ, –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ –∑–µ–ª–µ–Ω—É –≥–∞–ª–æ—á–∫—É —ñ —Å—Ç–∞—Ç—É—Å: **"Import completed"**.

<img width="1354" alt="vais-ready" src="https://github.com/RebelsBoss/Fix_my_car/assets/126337643/b8c3cf98-cd05-4b53-9562-47d0e84bd814">

3. –í–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –∑ –∫–æ–Ω—Å–æ–ª—ñ, –Ω–∞—Ç–∏—Å–Ω—É–≤—à–∏ **Apps** –Ω–∞ –ª—ñ–≤—ñ–π –±—ñ—á–Ω—ñ–π –ø–∞–Ω–µ–ª—ñ, –∞ –ø–æ—Ç—ñ–º **Preview**. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–≤–µ–¥—ñ—Ç—å –∑–∞–ø–∏—Ç: **Cymbal Starlight 2024: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –≤–∞–Ω—Ç–∞–∂–æ–ø—ñ–¥–π–æ–º–Ω—ñ—Å—Ç—å**. –ü–æ–≤–∏–Ω–µ–Ω –∑'—è–≤–∏—Ç–∏—Å—è –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

<img width="1369" alt="vais-preview-ui" src="https://github.com/RebelsBoss/Fix_my_car/assets/126337643/95bc01f0-5028-4b62-94ae-052fa874e992">

## –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é GKE –Ω–∞ Vertex AI

–í–∞—à —Å–µ—Ä–≤–µ—Ä –±–µ–∫–µ–Ω–¥–∞ –Ω–∞ –±–∞–∑—ñ **GKE** –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ **Vertex AI Search** —ñ **Gemini API Vertex AI**. –î–ª—è —Ü—å–æ–≥–æ –º–∏ –∑—ñ—Å—Ç–∞–≤–∏–º–æ –æ–±–ª—ñ–∫–æ–≤–∏–π –∑–∞–ø–∏—Å —Å–ª—É–∂–±–∏ **Kubernetes**, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –±–µ–∫–µ–Ω–¥-–ø–æ–¥–æ–º, –∑ –æ–±–ª—ñ–∫–æ–≤–∏–º –∑–∞–ø–∏—Å–æ–º —Å–ª—É–∂–±–∏ **Google Cloud IAM** –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–º–∏ –¥–æ–∑–≤–æ–ª–∞–º–∏. –¢—É—Ç –ø—Ä–∏–≤'—è–∑–∫–∞ –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É —Å–ª—É–∂–±–∏ **Kubernetes** –¥–æ —Å–ª—É–∂–±–∏ **GCP** –∑–∞–±–µ–∑–ø–µ—á—É—î –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é ("—Ö—Ç–æ –≤–∏?"), –∞ —Ä–æ–ª—ñ **IAM** –æ–±–ª—ñ–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É —Å–ª—É–∂–±–∏ **GCP** –∑–∞–±–µ–∑–ø–µ—á—É—é—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é ("—â–æ –≤–∞–º –¥–æ–∑–≤–æ–ª–µ–Ω–æ —Ä–æ–±–∏—Ç–∏?"). –¢–∞–∫–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è [**GKE Workload Identity**](https://cloud.google.com/kubernetes-engine/docs/concepts/workload-identity).

–¢–∞–∫–æ–∂ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–æ–¥–∞—Ç–∏ **PROJECT-ID** –¥–æ —Å–∫—Ä–∏–ø—Ç—É **workload_identity.sh**.

–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è, —â–æ–± –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é.

```
./workload_identity.sh
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

```
‚úÖ Workload Identity setup complete.
```

## –î–µ–ø–ª–æ—ó–º–æ –¥–æ–¥–∞—Ç–æ–∫ –¥–æ GKE

1. –ü—ñ–¥–≥–æ—Ç—É–π—Ç–µ—Å—è –¥–æ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É —Ç–∞ –±–µ–∫–µ–Ω–¥—É –Ω–∞ Kubernetes Engine **(GKE)**, –≤—ñ–¥–∫—Ä–∏–≤—à–∏ —Ñ–∞–π–ª **kubernetes/frontend-deployment.yaml**.
2. –û–Ω–æ–≤—ñ—Ç—å –ø–æ–ª–µ **image**, —â–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –≤–∞—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É:

```
image: us-central1-docker.pkg.dev/project123/fixmycar/frontend:latest
```

3. –ü–æ–≤—Ç–æ—Ä—ñ—Ç—å –∫—Ä–æ–∫ 2 –¥–ª—è **kubernetes/backend-deployment.yaml**.
4. –û–Ω–æ–≤—ñ—Ç—å **env var GCP_PROJECT_ID** —É —Ñ–∞–π–ª—ñ **backend-deployment.yaml**, —â–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –≤–∞—à–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É.


```
- name: GCP_PROJECT_ID
  value: "your-project-id"
```

5. O–Ω–æ–≤—ñ—Ç—å **env var VERTEX_AI_DATASTORE_ID** —É —Ñ–∞–π–ª—ñ **backend-deployment.yaml**, —â–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –≤–∞—à **Vertex AI Search Data Store ID**. –í–∏ –º–æ–∂–µ—Ç–µ –∑–Ω–∞–π—Ç–∏ –π–æ–≥–æ –≤ –∫–æ–Ω—Å–æ–ª—ñ, –Ω–∞—Ç–∏—Å–Ω—É–≤—à–∏ **"Data"** —ñ —Å–∫–æ–ø—ñ—é–≤–∞–≤—à–∏ –∑–Ω–∞—á–µ–Ω–Ω—è **Data Store ID**.

```
- name: VERTEX_AI_DATASTORE_ID
  value: "your-datastore-id"
```

6. –†–æ–∑–≥–æ—Ä–Ω—ñ—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É –Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä—ñ **GKE**. –¶–µ —Å—Ç–≤–æ—Ä–∏—Ç—å —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è (**"Pods"**, –∞–±–æ –∑–∞–ø—É—â–µ–Ω—ñ —Å–µ—Ä–≤–µ—Ä–∏) —è–∫ –¥–ª—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É **Streamlit**, —Ç–∞–∫ —ñ –¥–ª—è –±–µ–∫–µ–Ω–¥–∞ **Java**. –¢–∞–∫–æ–∂ –±—É–¥—É—Ç—å —Å—Ç–≤–æ—Ä–µ–Ω—ñ —Å–ª—É–∂–±–∏, —è–∫—ñ –≤—ñ–¥–∫—Ä–∏—é—Ç—å –æ–±–∏–¥–≤–∞ —Å–µ—Ä–≤–µ—Ä–∏ –¥–ª—è –ø—É–±–ª—ñ—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø—É –¥–æ –Ü–Ω—Ç–µ—Ä–Ω–µ—Ç—É.

```
kubectl apply -f kubernetes/backend-deployment.yaml
kubectl apply -f kubernetes/backend-service.yaml
kubectl apply -f kubernetes/frontend-deployment.yaml
kubectl apply -f kubernetes/frontend-service.yaml
```

–í–∏ –º–æ–∂–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –ø–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ –∫–æ—Ä–∏–≥—É–≤–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ **Autopilot**. –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, [**GKE Autopilot**](https://cloud.google.com/kubernetes-engine/docs/concepts/autopilot-resource-requests#overview) –º–∞—Å—à—Ç–∞–±—É—î —Å–≤–æ—ó –æ–±—á–∏—Å–ª—é–≤–∞–ª—å–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏ –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤–∞—à–∏—Ö —Ä–æ–±–æ—á–∏—Ö –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å.

```
Warning: autopilot-default-resources-mutator:Autopilot updated Deployment default/fixmycar-frontend: adjusted resources to meet requirements for containers [fixmycar-frontend] (see http://g.co/gke/autopilot-resources)
```

## –¢–µ—Å—Ç—É—î–º–æ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

1. –û—Ç—Ä–∏–º–∞–π—Ç–µ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Å—Ç–∞–Ω –≤–∞—à–∏—Ö –∑–∞–ø—É—â–µ–Ω–∏—Ö **GKE**-–ø–æ–¥—ñ–≤, —â–æ–± –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ —Ñ—Ä–æ–Ω—Ç —ñ –±–µ–∫ –∑–∞–ø—É—Å—Ç–∏–ª–∏—Å—è —É—Å–ø—ñ—à–Ω–æ.

```
kubectl get pods
```

–ü—Ä–∏–º—ñ—Ç–∫–∞: —è–∫—â–æ –≤–∏ —Ä–æ–∑–≥–æ—Ä—Ç–∞—î—Ç–µ –∫–ª–∞—Å—Ç–µ—Ä —É–ø–µ—Ä—à–µ, –º–æ–∂–µ –∑–Ω–∞–¥–æ–±–∏—Ç–∏—Å—è ~3 —Ö–≤–∏–ª–∏–Ω–∏ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥—É –≤—ñ–¥ —Å—Ç–∞–Ω—É **Pending** –¥–æ —Å—Ç–∞–Ω—É **Running**. (**GKE** –º–∞—Å—à—Ç–∞–±—É—î –≤–∞—à –∫–ª–∞—Å—Ç–µ—Ä)

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

```
NAME                                 READY   STATUS    RESTARTS      AGE
fixmycar-backend-74fbb8c8b5-zbcmv    1/1     Running   0             3m
fixmycar-frontend-75ff59c776-h57r6   1/1     Running   0             2m
```

2. –°–∫–æ–ø—ñ—é–π—Ç–µ external IP –≤–∞—à–æ–≥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥-—Å–µ—Ä–≤—ñ—Å—É.

```
kubectl get service fixmycar-frontend
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

```
‚ûú kubectl get service fixmycar-frontend
NAME                TYPE           CLUSTER-IP       EXTERNAL-IP     PORT(S)        AGE
fixmycar-frontend   LoadBalancer   <ip-value>       <ip-value>      80:30519/TCP   4m13s
```

3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ü—é **IP**-–∞–¥—Ä–µ—Å—É —É –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä—ñ. –í–∏ –ø–æ–±–∞—á–∏—Ç–µ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å **Streamlit** –∑ –≤—ñ–∫–Ω–æ–º —á–∞—Ç—É.
4. –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –ø—ñ–¥–∫–∞–∑–∫—É —á–∞—Ç—É –Ω–∞ –æ—Å–Ω–æ–≤—ñ —ñ—Å–Ω—É—é—á–æ–≥–æ –ø—É–Ω–∫—Ç—É –≤ –ø–æ—Å—ñ–±–Ω–∏–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ **Cymbal Starlight**.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏ –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–ø–∏—Ç–∞—Ç–∏ –ø—Ä–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É –≤–∞–Ω—Ç–∞–∂–æ–ø—ñ–¥–π–æ–º–Ω—ñ—Å—Ç—å –∞–≤—Ç–æ–º–æ–±—ñ–ª—è. –¶–µ–π —Ç–µ–∫—Å—Ç –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –Ω–∞—à–æ–º—É —Å—Ö–æ–≤–∏—â—ñ –¥–∞–Ω–∏—Ö **Vertex**, —Ç–æ–º—É –Ω–∞—à –¥–æ–¥–∞—Ç–æ–∫ –∑–º–æ–∂–µ –∑–Ω–∞–π—Ç–∏ —Ü—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –¥–ª—è –Ω–∞—Å.

<img width="744" alt="cargo-manual" src="https://github.com/RebelsBoss/Fix_my_car/assets/126337643/46df986d-9cc6-428e-a3f8-a6b00c9d80c2">

–ó–∞–ø—Ä–æ–ø–æ–Ω—É–π—Ç–µ –¥–æ–¥–∞—Ç–æ–∫ **Streamlit**:

```
Cymbal Starlight 2024: What is the max cargo capacity?
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

<img width="1338" alt="cargo-capacity-streamlit" src="https://github.com/RebelsBoss/Fix_my_car/assets/126337643/950ab501-24f3-44bb-a510-831465805b10">

–í—ñ–¥–ø–æ–≤—ñ–¥—å –º–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ —Ç–µ–∫—Å—Ç—É –∑ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó.
–í–∏ –º–æ–∂–µ—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏, —â–æ –≤—ñ–¥–±—É–≤–∞–ª–æ—Å—è **"–ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º"**, –ø–µ—Ä–µ–≥–ª—è–Ω—É–≤—à–∏ –ª–æ–≥–∏ –±–µ–∫–µ–Ω–¥-—Å–µ—Ä–≤–µ—Ä–∞:

```
kubectl logs -l app=fixmycar-backend
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

```
fixmycar-backend-77cb969894-cfvbq fixmycar-backend 2024-03-23T23:35:07.059Z  INFO 1 --- [nio-8080-exec-4] c.c.f.FixMyCarBackendController          : üîç Vertex AI Search results: Chapter 6: Towing, Cargo, and Luggage Towing Your Cymbal Starlight 2024 is not equipped to tow a trailer. Cargo The Cymbal Starlight 2024 has a cargo capacity of <b>13.5 cubic feet</b>. The cargo area is located in the trunk of the vehicle.
fixmycar-backend-77cb969894-cfvbq fixmycar-backend 2024-03-23T23:35:07.060Z  INFO 1 --- [nio-8080-exec-4] c.c.f.FixMyCarBackendController          : üîÆ Gemini Prompt: You are a helpful car manual chatbot. Answer the car owner's question about their car. Human prompt: Cymbal Starlight 2024: what is the max cargo capacity?,
fixmycar-backend-77cb969894-cfvbq fixmycar-backend  Use the following grounding data as context. This came from the relevant vehicle owner's manual: Chapter 6: Towing, Cargo, and Luggage Towing Your Cymbal Starlight 2024 is not equipped to tow a trailer. Cargo The Cymbal Starlight 2024 has a cargo capacity of <b>13.5 cubic feet</b>. The cargo area is located in the trunk of the vehicle.
fixmycar-backend-77cb969894-cfvbq fixmycar-backend 2024-03-23T23:35:07.762Z  INFO 1 --- [nio-8080-exec-4] c.c.f.FixMyCarBackendController          : üîÆ Gemini Response: The Cymbal Starlight 2024 has a cargo capacity of 13.5 cubic feet. The cargo area is located in the trunk of the vehicle.
```

–¢—É—Ç –≤–∏ –±–∞—á–∏—Ç–µ, —è–∫ –±–µ–∫–µ–Ω–¥ –≤–∏–∫–æ–Ω—É—î –ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç –¥–æ **Vertex AI Search**, –∞ –ø–æ—Ç—ñ–º –¥–æ–ø–æ–≤–Ω—é—î –ø—ñ–¥–∫–∞–∑–∫—É **Gemini**, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏. –ü–æ—Ç—ñ–º –≤—ñ–¥–ø–æ–≤—ñ–¥—å **Gemini** –Ω–∞–¥—Å–∏–ª–∞—î—Ç—å—Å—è –Ω–∞–∑–∞–¥ –¥–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É, —ñ —Å–∞–º–µ —ó—ó –≤–∏ –±–∞—á–∏—Ç–µ —è–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥—å —á–∞—Ç-–±–æ—Ç–∞ —É –±—Ä–∞—É–∑–µ—Ä—ñ.
